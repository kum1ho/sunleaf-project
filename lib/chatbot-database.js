// –ë–∞–∑–∞ –∑–Ω–∞–Ω—å –¥–ª—è —á–∞—Ç-–±–æ—Ç–∞ –∑ –∫–ª—é—á–æ–≤–∏–º–∏ —Å–ª–æ–≤–∞–º–∏ —Ç–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—è–º–∏
const CHATBOT_RESPONSES = {
  // –ü—Ä–∏–≤—ñ—Ç–∞–Ω–Ω—è
  greetings: {
    keywords: ['–ø—Ä–∏–≤—ñ—Ç', 'hello', 'hi', '–≤—ñ—Ç–∞—é', '–¥–æ–±—Ä–æ–≥–æ', '–¥–æ–±—Ä–∏–π'],
    responses: [
      '–ü—Ä–∏–≤—ñ—Ç! ‚òï –Ø SunBot ‚Äî –≤–∞—à –ø–æ–º—ñ—á–Ω–∏–∫ —É —Å–≤—ñ—Ç—ñ –ø—Ä–µ–º—ñ—É–º –∫–∞–≤–∏ —Ç–∞ —á–∞—é! –ß–∏–º –º–æ–∂—É –¥–æ–ø–æ–º–æ–≥—Ç–∏?',
      '–í—ñ—Ç–∞—é! üåü –†–∞–¥–∏–π –±–∞—á–∏—Ç–∏ –≤–∞—Å —É Sunleaf! –Ø–∫—ñ –ø–∏—Ç–∞–Ω–Ω—è —É –≤–∞—Å —î?'
    ]
  },

  // –¶—ñ–Ω–∏ –Ω–∞ –∫–∞–≤—É
  coffee_prices: {
    keywords: ['—Ü—ñ–Ω–∞ –∫–∞–≤', '—Å–∫—ñ–ª—å–∫–∏ –∫–∞–≤', '–≤–∞—Ä—Ç—ñ—Å—Ç—å –∫–∞–≤'],
    responses: [
      '–¶—ñ–Ω–∏ –Ω–∞ –∫–∞–≤—É:\n‚òï –ê—Ä–∞–±—ñ–∫–∞ –ø—Ä–µ–º—ñ—É–º ‚Äî –≤—ñ–¥ 320 –≥—Ä–Ω/–∫–≥\n‚òï –†–æ–±—É—Å—Ç–∞ ‚Äî –≤—ñ–¥ 280 –≥—Ä–Ω/–∫–≥\n‚òï –ï—Å–ø—Ä–µ—Å–æ-–±–ª–µ–Ω–¥ ‚Äî –≤—ñ–¥ 350 –≥—Ä–Ω/–∫–≥\n\n–ú—ñ–Ω—ñ–º–∞–ª—å–Ω–µ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è: 5 –∫–≥'
    ]
  },

  // –î–æ—Å—Ç–∞–≤–∫–∞
  delivery: {
    keywords: ['–¥–æ—Å—Ç–∞–≤–∫', 'delivery', '–ø—Ä–∏–≤–µ–∑—Ç–∏'],
    responses: [
      '–î–æ—Å—Ç–∞–≤–∫–∞ Sunleaf üöö\n\n‚úÖ –ñ–∏—Ç–æ–º–∏—Ä ‚Äî –ë–ï–ó–ö–û–®–¢–û–í–ù–û –≤—ñ–¥ 2000 –≥—Ä–Ω\n‚úÖ –ü–æ –£–∫—Ä–∞—ó–Ω—ñ ‚Äî –ù–æ–≤–∞ –ü–æ—à—Ç–∞ 1-2 –¥–Ω—ñ\n‚úÖ –í—ñ–¥–ø—Ä–∞–≤–∫–∞ ‚Äî –ø—Ä–æ—Ç—è–≥–æ–º 24 –≥–æ–¥–∏–Ω'
    ]
  },

  // –ö–æ–Ω—Ç–∞–∫—Ç–∏
  contacts: {
    keywords: ['–∫–æ–Ω—Ç–∞–∫—Ç', '—Ç–µ–ª–µ—Ñ–æ–Ω', 'phone'],
    responses: [
      '–ö–æ–Ω—Ç–∞–∫—Ç–∏ Sunleaf üìû\n\n‚òéÔ∏è +380 67 123-45-67\nüìß info@sunleaf.ua\nüìç –º. –ñ–∏—Ç–æ–º–∏—Ä, –≤—É–ª. –ö–∏—ó–≤—Å—å–∫–∞, 75'
    ]
  }
};

// –§—É–Ω–∫—Ü—ñ—è –ø–æ—à—É–∫—É –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ
function findBotResponse(message) {
  const lowerMessage = message.toLowerCase();
  
  // –®—É–∫–∞—î–º–æ —Å–ø—ñ–≤–ø–∞–¥—ñ–Ω–Ω—è –∑ –∫–ª—é—á–æ–≤–∏–º–∏ —Å–ª–æ–≤–∞–º–∏
  for (const category in CHATBOT_RESPONSES) {
    const data = CHATBOT_RESPONSES[category];
    for (const keyword of data.keywords) {
      if (lowerMessage.includes(keyword)) {
        const responses = data.responses;
        return { 
          response: responses[Math.floor(Math.random() * responses.length)], 
          category 
        };
      }
    }
  }
  
  // –Ø–∫—â–æ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ
  return {
    response: '–î—è–∫—É—é –∑–∞ –∑–∞–ø–∏—Ç–∞–Ω–Ω—è! üòä\n\n–¢–µ–ª–µ—Ñ–æ–Ω—É–π—Ç–µ: +380 67 123-45-67\nEmail: info@sunleaf.ua',
    category: 'fallback'
  };
}

module.exports = { CHATBOT_RESPONSES, findBotResponse };
